FROM ubuntu:22.04

RUN apt-get update && apt-get install -y \
    curl jq git ca-certificates \
    && rm -rf /var/lib/apt/lists/*

RUN useradd -m runner
WORKDIR /home/runner

RUN curl -L https://github.com/actions/runner/releases/download/v2.330.0/actions-runner-linux-x64-2.330.0.tar.gz \
    | tar zx

RUN ./bin/installdependencies.sh

COPY start.sh .
RUN chmod +x start.sh

USER runner
ENTRYPOINT ["./start.sh"]
